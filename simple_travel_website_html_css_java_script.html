<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>WanderLite — Simple Travel Site</title>
  <style>
    :root{--bg:#0b1020;--elev:#121836;--text:#e9eef6;--muted:#bfc7da;--brand:#6ee7b7;--accent:#93c5fd;--danger:#fca5a5;--ring:#60a5fa80}
    [data-theme="light"]{--bg:#f7f9fc;--elev:#ffffff;--text:#0f172a;--muted:#475569;--brand:#14b8a6;--accent:#2563eb;--danger:#dc2626;--ring:#2563eb40}
    *{box-sizing:border-box}html{scroll-behavior:smooth}body{margin:0;font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;background:var(--bg);color:var(--text)}
    a{color:inherit;text-decoration:none}img{max-width:100%;display:block}
    .container{width:min(1100px,92%);margin:0 auto}
    .nav{position:sticky;top:0;z-index:50;backdrop-filter:blur(8px);background:color-mix(in oklab,var(--bg) 82%,transparent);border-bottom:1px solid color-mix(in oklab,var(--text) 12%,transparent)}
    .nav-inner{display:flex;align-items:center;justify-content:space-between;padding:.75rem 0}
    .nav-links{display:flex;gap:1rem;align-items:center}
    .btn{display:inline-flex;align-items:center;gap:.4rem;border:1px solid transparent;padding:.55rem .9rem;border-radius:999px;font-weight:600;cursor:pointer}
    .btn-primary{background:var(--brand);color:#06241b}
    .btn-outline{border-color:color-mix(in oklab,var(--text) 18%,transparent)}
    .hero{position:relative;isolation:isolate}
    .hero::after{content:"";position:absolute;inset:0;z-index:-1;background:radial-gradient(800px 400px at 20% 0%,#10b98133,transparent 70%),radial-gradient(600px 300px at 90% -10%,#60a5fa33,transparent 60%);pointer-events:none}
    .hero-inner{display:grid;gap:1.25rem;padding:4rem 0 3rem}
    .headline{font-size:clamp(2rem,4vw,3rem);line-height:1.05;margin:0}
    .subline{color:var(--muted);max-width:55ch}
    .searchbar{display:flex;flex-wrap:wrap;gap:.6rem}
    .searchbar input,.searchbar select{background:var(--elev);color:var(--text);border:1px solid color-mix(in oklab,var(--text) 12%,transparent);border-radius:12px;padding:.75rem .9rem;outline:none}
    .searchbar input:focus,.searchbar select:focus{box-shadow:0 0 0 6px var(--ring)}
    section{padding:2.25rem 0}
    .section-title{margin:0 0 1rem;font-size:1.35rem}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(230px,1fr));gap:1rem}
    .card{background:var(--elev);border:1px solid color-mix(in oklab,var(--text) 10%,transparent);border-radius:16px;overflow:hidden;display:flex;flex-direction:column}
    .card-media{aspect-ratio:16/10;overflow:hidden}
    .card-media img{width:100%;height:100%;object-fit:cover;filter:saturate(1.05) contrast(1.05)}
    .card-body{padding:.85rem}
    .chip{display:inline-flex;align-items:center;padding:.25rem .55rem;border-radius:999px;font-size:.75rem;border:1px solid color-mix(in oklab,var(--text) 16%,transparent);color:var(--muted)}
    .card-actions{display:flex;gap:.5rem;margin-top:.75rem}
    .split{display:grid;grid-template-columns:1.2fr .8fr;gap:1.25rem}
    @media(max-width:900px){.split{grid-template-columns:1fr}}
    .panel{background:var(--elev);border:1px solid color-mix(in oklab,var(--text) 10%,transparent);border-radius:16px;padding:1rem}
    .stack{display:grid;gap:.6rem}
    label{font-size:.9rem;color:var(--muted)}
    input,select,textarea{width:100%;background:var(--elev);color:var(--text);border:1px solid color-mix(in oklab,var(--text) 12%,transparent);border-radius:12px;padding:.7rem .8rem}
    input:focus,select:focus,textarea:focus{box-shadow:0 0 0 6px var(--ring);outline:none}
    .muted{color:var(--muted)}
    .price{font-weight:800}
    .accordion details{background:var(--elev);border:1px solid color-mix(in oklab,var(--text) 10%,transparent);border-radius:12px;padding:.7rem 1rem}
    .accordion details[open]{outline:2px solid color-mix(in oklab,var(--accent) 50%,transparent)}
    .accordion summary{cursor:pointer;font-weight:600}
    footer{border-top:1px solid color-mix(in oklab,var(--text) 10%,transparent);padding:2rem 0;text-align:center;color:var(--muted)}
    .pillbar{display:flex;flex-wrap:wrap;gap:.5rem}
    .pill{border:1px solid color-mix(in oklab,var(--text) 15%,transparent);padding:.35rem .7rem;border-radius:999px;cursor:pointer;color:var(--muted)}
    .pill[aria-pressed="true"]{background:color-mix(in oklab,var(--brand) 25%,transparent);color:#06241b;border-color:transparent}
    .toast{position:fixed;bottom:1rem;left:50%;transform:translateX(-50%);background:var(--elev);color:var(--text);border:1px solid color-mix(in oklab,var(--text) 10%,transparent);padding:.6rem .9rem;border-radius:10px;display:none}
    .sr-only{position:absolute;width:1px;height:1px;margin:-1px;border:0;padding:0;clip:rect(0 0 0 0);overflow:hidden}
  </style>
</head>
<body>
  <nav class="nav">
    <div class="container nav-inner">
      <a class="brand" href="#top">WanderLite</a>
      <div class="nav-links">
        <a href="#destinations">Destinations</a>
        <a href="#book">Book</a>
        <a href="#faq">FAQ</a>
        <button id="themeToggle" class="btn btn-outline" aria-pressed="false">Theme</button>
        <a class="btn btn-primary" href="#book">Plan a Trip</a>
      </div>
    </div>
  </nav>

  <header id="top" class="hero">
    <div class="container hero-inner">
      <h1 class="headline">Plan light. Travel bright.</h1>
      <p class="subline">Click **Book** or **Plan a Trip** → first click = nothing, second click = event fires!</p>
    </div>
  </header>

  <!-- Amazon AAT -->
  <script>
    !function(w,d,s,t,a){
      if(w.amzn) return;
      w.amzn=a=function(){w.amzn.q.push([arguments,(new Date).getTime()])};
      a.q=[]; a.version="0.0";
      s=d.createElement("script");
      s.src="https://c.amazon-adsystem.com/aat/amzn.js";
      s.id="amzn-pixel";
      s.async=true;
      t=d.getElementsByTagName("script")[0];
      t.parentNode.insertBefore(s,t)
    }(window,document);
    setTimeout(() => {
      if (window.amzn) {
        amzn("setRegion", "NA");
        amzn("addTag", "63038c42-f1e7-49b9-94a7-a618cf31b0c0");
        amzn("trackEvent", "PageView");
      }
    }, 1000);
  </script>

  <!-- DYNAMIC EVENT LOADER – ONLY AFTER SAVE -->
  <script>
    (function () {
      const STORAGE_KEY = 'eventConfigs_v2';
      let configs = [];

      // Only load and attach if configs were saved
      try {
        const saved = localStorage.getItem(STORAGE_KEY);
        if (saved) {
          configs = JSON.parse(saved);
          console.log(`Loaded ${configs.length} saved config(s)`);
        }
      } catch (e) {}

      configs.forEach(cfg => {
        const el = document.querySelector(cfg.selector);
        if (!el || el.dataset.eventBound) return;

        el.dataset.eventBound = 'true';
        el.dataset.clickCount = '0';

        el.addEventListener('click', () => {
          let count = (parseInt(el.dataset.clickCount) || 0) + 1;
          el.dataset.clickCount = count;

          if (count === 1) return; // First click → silent

          if (window.amzn?.trackEvent) {
            amzn.trackEvent(cfg.event, { url: location.href, label: cfg.label });
          }
          console.log("Event fired to Amazon Ad Tag (AAT) !!");
        });

        console.log(`Attached ${cfg.event} to: ${cfg.selector}`);
      });
    })();
  </script>

  <!-- Your original site script -->
  <script>
    const DESTINATIONS = [
      {id:'okinawa',name:'Okinawa, Japan',region:'Asia',tags:['beach','family'],blurb:'Crystal lagoons, coral reefs, and friendly island vibes.',photo:'https://images.unsplash.com/photo-1519046904884-53103b34b206?q=80&w=1200&auto=format&fit=crop',baseNight:110},
      {id:'banff',name:'Banff, Canada',region:'Americas',tags:['mountain','hiking','family'],blurb:'Turquoise lakes and snow-dusted peaks in the Rockies.',photo:'https://images.unsplash.com/photo-1501785888041-af3ef285b470?q=80&w=1200&auto=format&fit=crop',baseNight:160},
      {id:'lisbon',name:'Lisbon, Portugal',region:'Europe',tags:['city','budget'],blurb:'Sunlit alleys, trams, and pastel de nata by the river.',photo:'https://images.unsplash.com/photo-1508057198894-247b23fe5ade?q=80&w=1200&auto=format&fit=crop',baseNight:95},
      {id:'bali',name:'Bali, Indonesia',region:'Asia',tags:['beach','budget'],blurb:'Rice terraces, surf breaks, temple sunsets — classic.',photo:'https://images.unsplash.com/photo-1537996194471-e657df975ab4?q=80&w=1200&auto=format&fit=crop',baseNight:85},
      {id:'amsterdam',name:'Amsterdam, Netherlands',region:'Europe',tags:['city','family'],blurb:'Bikes, canals, stroopwafels — slow and scenic.',photo:'https://images.unsplash.com/photo-1506089676908-3592f7389d4d?q=80&w=1200&auto=format&fit=crop',baseNight:140},
      {id:'cusco',name:'Cusco, Peru',region:'Americas',tags:['mountain','hiking'],blurb:'Gateway to Machu Picchu with Andean charm.',photo:'https://images.unsplash.com/photo-1519681393784-d120267933ba?q=80&w=1200&auto=format&fit=crop',baseNight:105}
    ];

    const cardsEl=document.getElementById('cards'),qEl=document.getElementById('q'),regionEl=document.getElementById('region'),clearFiltersEl=document.getElementById('clearFilters'),placesListEl=document.getElementById('placesList'),toastEl=document.getElementById('toast'),favsEl=document.getElementById('favorites');
    const themeToggle=document.getElementById('themeToggle'),THEME_KEY='wander-theme';
    function initTheme(){const s=localStorage.getItem(THEME_KEY)||'dark';document.documentElement.dataset.theme=s;themeToggle.setAttribute('aria-pressed',s==='light')}
    themeToggle.addEventListener('click',()=>{const c=document.documentElement.dataset.theme==='light'?'dark':'light';document.documentElement.dataset.theme=c;localStorage.setItem(THEME_KEY,c);themeToggle.setAttribute('aria-pressed',c==='light')});
    function renderList(l){cardsEl.innerHTML='';const t=document.getElementById('cardTmpl');l.forEach(i=>{const n=t.content.cloneNode(true),a=n.querySelector('article');a.dataset.id=i.id;n.querySelector('img').src=i.photo;n.querySelector('img').alt=i.name;n.querySelector('h3').textContent=i.name;n.querySelector('.chip').textContent=i.region;n.querySelector('p').textContent=i.blurb;n.querySelector('.js-fav').addEventListener('click',()=>toggleFav(i.id));n.querySelector('.js-more').addEventListener('click',()=>openModal(i));cardsEl.appendChild(n)});if(l.length===0)cardsEl.innerHTML='<p class="muted">No matches. Try different filters.</p>'}
    function matchesFilters(i,q,r,t){const txt=(i.name+' '+i.region+' '+i.tags.join(' ')+' '+i.blurb).toLowerCase();return(!q||txt.includes(q.toLowerCase()))&&(!r||i.region===r)&&(t.size===0||i.tags.some(tag=>t.has(tag)))}
    const activeTags=new Set();document.querySelectorAll('.pill').forEach(p=>{p.addEventListener('click',()=>{const tag=p.dataset.tag;if(activeTags.has(tag)){activeTags.delete(tag);p.setAttribute('aria-pressed','false')}else{activeTags.add(tag);p.setAttribute('aria-pressed','true')}applyFilters()})});
    function applyFilters(){const q=qEl.value.trim(),r=regionEl.value,f=DESTINATIONS.filter(d=>matchesFilters(d,q,r,activeTags));renderList(f)}
    document.getElementById('searchForm').addEventListener('input',applyFilters);
    clearFiltersEl.addEventListener('click',e=>{e.preventDefault();qEl.value='';regionEl.value='';activeTags.clear();document.querySelectorAll('.pill').forEach(p=>p.setAttribute('aria-pressed','false'));applyFilters()});
    const FAV_KEY='wander-favs';function getFavs(){try{return new Set(JSON.parse(localStorage.getItem(FAV_KEY))||[])}catch{return new Set()}}function saveFavs(s){localStorage.setItem(FAV_KEY,JSON.stringify([...s]))}function toggleFav(id){const f=getFavs();if(f.has(id)){f.delete(id);showToast('Removed from favorites')}else{f.add(id);showToast('Added to favorites')}saveFavs(f);renderFavs()}function renderFavs(){const f=getFavs();favsEl.innerHTML='';const i=DESTINATIONS.filter(d=>f.has(d.id));if(i.length===0){favsEl.innerHTML='<p class="muted">No favorites yet.</p>';return}i.forEach(d=>{const e=document.createElement('div');e.className='card';e.innerHTML=`<div class="card-media"><img loading="lazy" src="${d.photo}" alt="${d.name}"></div><div class="card-body"><div style="display:flex;align-items:center;justify-content:space-between;gap:.5rem"><h3 style="margin:.2rem 0;font-size:1.05rem">${d.name}</h3><button class="btn btn-outline">Remove</button></div></div>`;e.querySelector('button').addEventListener('click',()=>toggleFav(d.id));favsEl.appendChild(e)})}
    const modal=document.getElementById('modal'),modalTitle=document.getElementById('modalTitle'),modalBody=document.getElementById('modalBody');function openModal(i){modalTitle.textContent=i.name;modalBody.innerHTML=`<img src="${i.photo}" alt="${i.name}" style="border-radius:12px" /><p class="muted">${i.blurb}</p><p><strong>Region:</strong> ${i.region}</p><p><strong>Tags:</strong> ${i.tags.join(', ')}</p><p><strong>Typical nightly base:</strong> $${i.baseNight} / room</p>`;modal.showModal()}
    const form=document.getElementById('bookForm'),estPriceEl=document.getElementById('estPrice'),estNightsEl=document.getElementById('estNights');function daysBetween(a,b){const ms=24*60*60*1000;return Math.max(0,Math.round((b-a)/ms))}function calcPrice(p,n,t,c){const d=DESTINATIONS.find(x=>x.id===p||x.name.toLowerCase()===p.toLowerCase());const b=d?.baseNight??120,m={budget:.8,standard:1,premium:1.6}[c]||1,r=Math.ceil(t/2),h=b*m*r*Math.max(1,n),f=320*t*({Asia:1.3,Europe:1.2,Americas:1}[d?.region]||1),misc=40*t*Math.max(1,n);return Math.round(h+f+misc)}
    form.addEventListener('submit',e=>{e.preventDefault();const p=document.getElementById('place').value.trim(),f=new Date(document.getElementById('from').value),to=new Date(document.getElementById('to').value),t=parseInt(document.getElementById('travelers').value||'1',10),c=document.getElementById('comfort').value;if(!p||isNaN(+f)||isNaN(+to)){showToast('Please fill all fields');return}if(to<=f){showToast('End date must be after start date');return}const n=daysBetween(f,to),d=DESTINATIONS.find(x=>x.name.toLowerCase()===p.toLowerCase()||x.id===p),id=d?.id||p,pr=calcPrice(id,n,t,c);estPriceEl.textContent=`$${pr.toLocaleString()}`;estNightsEl.textContent=`for ${n} night${n!==1?'s':''}, ${t} traveler${t!==1?'s':''}`;showToast('Estimate updated')});
    function showToast(m){toastEl.textContent=m;toastEl.style.display='block';clearTimeout(showToast._t);showToast._t=setTimeout(()=>toastEl.style.display='none',1600)}function seedPlacesList(){DESTINATIONS.forEach(d=>{const o=document.createElement('option');o.value=d.name;placesListEl.appendChild(o)})}
    (function init(){document.getElementById('year').textContent=new Date().getFullYear();initTheme();seedPlacesList();renderList(DESTINATIONS);renderFavs()})();
  </script>
</body>
</html>
